{% extends 'base.html' %}
{% load static %}

{% block content %}

<style>
    .booking-section {
        background-color: rgba(0, 0, 0, 0.6);
        padding: 40px;
        border-radius: 12px;
        max-width: 700px;
        margin: 0 auto;
        color: #fff;
        font-size: 18px;
    }

    .booking-section h2 {
        text-align: center;
        font-size: 32px;
        color: #ffd700;
        margin-bottom: 20px;
    }

    form label {
        display: block;
        margin-top: 15px;
        font-weight: 600;
    }

    form select, form input[type="date"], form input[type="text"], form input[type="email"] {
        width: 100%;
        padding: 10px;
        border-radius: 6px;
        border: none;
        margin-top: 5px;
        font-size: 16px;
    }

    .btn-submit {
        margin-top: 25px;
        background-color: #ffd700;
        color: black;
        padding: 10px 20px;
        border: none;
        font-weight: bold;
        font-size: 16px;
        border-radius: 6px;
        cursor: pointer;
    }

    .btn-submit:hover {
        background-color: #ffcc00;
    }

    .form-success {
        color: lightgreen;
        margin-top: 20px;
        font-size: 16px;
    }
</style>

<div class="booking-section">
    <h2>Book Your Bike</h2>

    <form id="booking-form">
        <label for="user_name">Your Name</label>
        <input type="text" id="user_name" name="user_name" required>

        <label for="user_email">Your Email</label>
        <input type="email" id="user_email" name="user_email" required>

        <label for="bike_name">Bike Name</label>
        <input type="text" id="bike_name" name="bike_name" required>

        <label for="booking_date">Booking Date</label>
        <input type="date" id="booking_date" name="booking_date" required>

        <label for="bike_image">Bike Image URL</label>
        <input type="text" id="bike_image" name="bike_image" placeholder="https://example.com/image.jpg" required>

        <button type="submit" class="btn-submit">Send Booking</button>
    </form>

    <p class="form-success" id="success-msg" style="display: none;">âœ… Booking details sent to admin!</p>
</div>

<!-- EmailJS Script -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
    (function(){
        emailjs.init("YOUR_PUBLIC_KEY"); // Replace with your public key
    })();

    document.getElementById('booking-form').addEventListener('submit', function(e) {
        e.preventDefault();

        emailjs.send("YOUR_SERVICE_ID", "YOUR_TEMPLATE_ID", {
            user_name: document.getElementById("user_name").value,
            user_email: document.getElementById("user_email").value,
            bike_name: document.getElementById("bike_name").value,
            booking_date: document.getElementById("booking_date").value,
            bike_image: document.getElementById("bike_image").value
        }).then(function(response) {
            console.log('SUCCESS!', response.status, response.text);
            document.getElementById("success-msg").style.display = "block";
        }, function(error) {
            console.log('FAILED...', error);
            alert("Failed to send. Please try again.");
        });
    });
</script>

{% endblock %}
